<launch>
    <!-- Please make sure run "bash /opt/edge_ai_apps/init_script.sh" on TDA4 host Linux before launching this for OV5640 -->

    <arg name="device"         default="/dev/video2"/>
    <!-- framerate (integer) -->
    <arg name="framerate"      default="30"/>
    <!-- image encoding: "yuv420" - publishes in "NV12" (default), "rgb8" -->
    <arg name="image_encoding" default="yuv420"/>

    <!-- GStreamer pipeline specified in gscam_config was tested with Logitech C920 webcam in YUYV mode,
        'tiovxcolorconvert' assumes 'edgeai-tiovx-modules' and 'edgeai-gst-plugins' are already installed in TDA4 ROS container -->
    <node pkg="gscam" name="gscam_node" type="gscam" output="screen">
        <param name="gscam_config"
            value="v4l2src device=$(arg device) do-timestamp=true ! tiovxcolorconvert"/>
        <param name="camera_name"     value="camera"/>
        <param name="camera_info_url" value="package://gscam/config/C920_HD_camera_info.yaml"/>
        <param name="width"           value="1280"/>
        <param name="height"          value="720"/>
        <param name="framerate"       value="$(arg framerate)"/>
        <param name="sync_sink"       value="false"/>
        <param name="use_gst_timestamps" value="false"/>
        <param name="image_encoding"  value="$(arg image_encoding)"/>
    </node>

</launch>
